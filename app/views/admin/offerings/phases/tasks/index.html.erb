<h1 class="big-icon tasks">Tasks
	<span class="light">&raquo; <%=h @phase.name %></span>
	<span class="light right"><%= link_to "Add new task", new_offering_phase_task_path(@offering, @phase), :class => 'add button' %></span></h1>

<table>
	<tr>
		<th>#</th>
		<th>Name</th>
		<th>Display As</th>
		<th>Extra Fields</th>
		<th>Functions</th>
	</tr>

<% @tasks.each_with_index do |task, i| %>
<tr>
	<td><small class="light"><%= i %></small></td>
	<td><%= link_to task.title, offering_phase_task_path(@offering, @phase, task) %></td>
	<td><%=h task.read_attribute(:display_as).titleize rescue "<span class='light'>(default)</span>" %></td>
	<td><%= link_to task.extra_fields.size, offering_phase_task_extra_fields_path(@offering, @phase, task) %></td>
	<td><%= link_to 'Show', offering_phase_task_path(@offering, @phase, task) %>
		| <%= link_to 'Edit', edit_offering_phase_task_path(@offering, @phase, task) %>
		| <%= link_to 'Delete', offering_phase_task_path(@offering, @phase, task), :confirm => 'Are you sure?', :method => :delete %>
	</td>
</tr>
<% end %>

<% if @tasks.empty? -%>
<tr class="empty">
	<td colspan=5>
		No tasks have been created yet.
	</td>
</tr>
<%- end -%>

</table>

<% sidebar :phase_tasks %>