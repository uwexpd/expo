<% unless @in_sidebar %>
  <%= link_to_remote "Add to favorites", 
       {:url=> {:controller => "pipeline", :quarter_abbrev => @quarter.abbrev, :course_abbrev => @course_abbrev, 
        :action => "add_favorite", :id => @pipeline_position_id, :favorite_page => @favorite_page},
        :indicator => 'global',
        :before => "this.disabled=true;this.onclick=function(){return false;};
                    $('pipeline_favorite_image_#{@pipeline_position_id}').disabled=true;
                    $('pipeline_favorite_image_#{@pipeline_position_id}').onclick=function(){return false;};"},
        :class => "icon-left favorite-add", :id => "favorite_button_#{@pipeline_position_id}" %>
<% else %>
  <%= link_to_remote "Add to favorites", 
       {:url=> {:controller => "pipeline", :quarter_abbrev => @quarter.abbrev, :course_abbrev => @course_abbrev, 
        :action => "add_favorite", :id => @pipeline_position_id, :in_sidebar => @in_sidebar}, 
        :indicator => 'global',
        :before => "this.disabled=true;this.onclick=function(){return false;};"}, 
        :class => "icon-left favorite-add", :id => "favorite_button_#{@pipeline_position_id}" %>
<% end %>